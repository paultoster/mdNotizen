# Motion-Control-Simulink-Carmaker

## How to send Trajectories to Simulink Sfunction Block

The data will be saved in binary-File

Data-Structure:

- The table shows one block, each block starts with traj_count, which is also _

| name            | type   | bytes   | comment                                                                                                                                                                                                                                                                     |
| --------------- | ------ | ------- |:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| type            | uint8  | 1       | type = 0                                                                                                                                                                                                                                                                    |
|                 |        |         | type = 255 last block                                                                                                                                                                                                                                                       |
| `traj_count`    | uint32 | 4       | is also sended as single input from input sfunction and must be counted up and starts withÂ `traj_icount = 1`                                                                                                                                                                |
| `valid`         | uint8  | 1       | is boolean                                                                                                                                                                                                                                                                  |
| priority        | uint32 | 4       |                                                                                                                                                                                                                                                                             |
| change_counter  | uint32 | 4       |                                                                                                                                                                                                                                                                             |
| ctrl_type       | uint8  | 1       | enum CtrlType<br/>  {<br/>    TYPE_LAT_CTRL      = 0;<br/>    TYPE_LONG_CTRL     = 1;<br/>    TYPE_LAT_LONG_CTRL = 2;<br/>  }                                                                                                                                               |
| point_type      | uint8  | 1       | enum PointType<br/>  {<br/>    TYPE_FA   = 0;<br/>    TYPE_COG  = 1;<br/>    TYPE_FARA = 2;<br/>    TYPE_RA   = 3;<br/>    TYPE_VARCOG = 4;      /// variable position (by portionvarcog) along middle of vechile from COG to FA (0...1) orfrom COG to RA (0...-1)<br/>  }; |
| calc_type       | uint8  | 1       | enum CalcType<br/>  {<br/>    TRAJECTORY = 0;<br/>    PATH       = 1;<br/>  };                                                                                                                                                                                              |
| replanning      | uint8  | 1       |                                                                                                                                                                                                                                                                             |
| final_segment   | uint8  | 1       |                                                                                                                                                                                                                                                                             |
| maneuver_type   | uint8  | 1       | enum ManeuverType<br/>  {<br/>    CRUISING        = 0;<br/>    PARKING         = 1;<br/>    AVP2_FA         = 2;<br/>    AVP2_RA         = 3;<br/>  }                                                                                                                       |
| `n_x_fa`        | uint32 | 4       | length of vector                                                                                                                                                                                                                                                            |
| `x_fa_vec`      | float  | `n x 4` |                                                                                                                                                                                                                                                                             |
| `n_y_fa`        | uint32 | 4       | length of vector                                                                                                                                                                                                                                                            |
| `y_fa_vec`      | float  | `n x 4` |                                                                                                                                                                                                                                                                             |
| `n_s_fa`        | uint32 | 4       | length of vector                                                                                                                                                                                                                                                            |
| `s_fa_vec`      | float  | `n x 4` |                                                                                                                                                                                                                                                                             |
| `n_x_ra`        | uint32 | 4       | length of vector                                                                                                                                                                                                                                                            |
| `x_ra_vec`      | float  | `n x 4` |                                                                                                                                                                                                                                                                             |
| `n_y_ra`        | uint32 | 4       | length of vector                                                                                                                                                                                                                                                            |
| `y_ra_vec`      | float  | `n x 4` |                                                                                                                                                                                                                                                                             |
| `n_s_ra`        | uint32 | 4       | length of vector                                                                                                                                                                                                                                                            |
| `s_ra_vec`      | float  | `n x 4` |                                                                                                                                                                                                                                                                             |
| `n_x_cog`       | uint32 | 4       | length of vector                                                                                                                                                                                                                                                            |
| `x_cog_vec`     | float  | `n x 4` |                                                                                                                                                                                                                                                                             |
| `n_y_cog`       | uint32 | 4       | length of vector                                                                                                                                                                                                                                                            |
| `y_cog_vec`     | float  | `n x 4` |                                                                                                                                                                                                                                                                             |
| `n_s_cog`       | uint32 | 4       | length of vector                                                                                                                                                                                                                                                            |
| `s_cog_vec`     | float  | `n x 4` |                                                                                                                                                                                                                                                                             |
| `n_theta`       | uint32 | 4       | length of vector                                                                                                                                                                                                                                                            |
| `theta_vec`     | float  | `n x 4` |                                                                                                                                                                                                                                                                             |
| `n_kappa`       | uint32 | 4       | length of vector                                                                                                                                                                                                                                                            |
| `kappa_vec`     | float  | `n x 4` |                                                                                                                                                                                                                                                                             |
| `n_vel`         | uint32 | 4       | length of vector                                                                                                                                                                                                                                                            |
| `vel_vec`       | float  | `n x 4` |                                                                                                                                                                                                                                                                             |
| `n_acc`         | uint32 | 4       | length of vector                                                                                                                                                                                                                                                            |
| `acc_vec`       | float  | `n x 4` |                                                                                                                                                                                                                                                                             |
| `n_timestamp`   | uint32 | 4       | length of vector                                                                                                                                                                                                                                                            |
| dir             | sint8  | 1       | direction +1/-1                                                                                                                                                                                                                                                             |
| `timestamp_vec` | uint64 | `n x 8` |                                                                                                                                                                                                                                                                             |
|                 |        |         |                                                                                                                                                                                                                                                                             |
